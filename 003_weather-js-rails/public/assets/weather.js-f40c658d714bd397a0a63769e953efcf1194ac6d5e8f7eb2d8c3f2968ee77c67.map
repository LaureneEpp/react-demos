{
  "version": 3,
  "sources": ["../../javascript/weather.js"],
  "sourcesContent": ["document.addEventListener(\"DOMContentLoaded\", () => {\n  // Get all links\n  const cityInput = document.getElementById(\"city-input\");\n  const weatherDisplay = document.getElementById(\"weather-display\");\n  const weatherMoreInfoDisplay = document.getElementById(\n    \"weather-more-info-display\"\n  );\n  const errorDisplay = document.getElementById(\"error-display\");\n  const errorPopup = document.getElementById(\"error-popup\");\n  const errorMessage = document.getElementById(\"error-message\");\n  const resetButton = document.getElementById(\"reset-button\");\n\n  let weatherData;\n  const selectedInfoTypes = [];\n\n  // Event listener to the weather form\n  document\n    .getElementById(\"weather-form\")\n    .addEventListener(\"submit\", (event) => {\n      event.preventDefault();\n\n      // Get the city input value\n      const city = cityInput.value.trim();\n\n      if (!city) {\n        handleApiError(\"Enter a correct city\");\n        weatherDisplay.textContent = \"\";\n        return;\n      }\n\n      // Fetch weather data for the city\n      fetch(`/weather?city=${city}`)\n        .then((response) => {\n          if (response.status === 200) {\n            return response.json();\n          } else {\n            throw new Error(\"Fail to fetch weather data!\");\n          }\n        })\n        .then((data) => {\n          weatherData = data;\n          displayWeather(weatherData);\n          errorDisplay.textContent = \"\";\n          createInfoButtons();\n        })\n        .catch((error) => {\n          handleApiError(error.message);\n        });\n    });\n\n  // Display weather data\n  function displayWeather(data) {\n    // Is data defined?\n    if (!data) {\n      handleApiError(\"Weather data is undefined.\");\n      return;\n    }\n\n    const { name, sys, main, weather } = data;\n\n    // HTML for weather display\n    const weatherHtml = `\n        <div class=\"card bg_blue-dark-color p-3 primary-color\" style=\"width: 18rem;\">\n          <div class=\"card-body\">\n            <h5 class=\"card-title d-flex flex-row\">\n            <span>\n              <span id=\"map-icon-container\">\n              </span>\n            </span>\n            <span class=\"ms-2\">Weather in ${name} in ${sys.country}</spaan>\n            </h5>\n            <p class=\"card-text\"><span class=\"fw-semibold\">Temperature:</span> ${main.temp}\u00B0C</p>\n            <p class=\"card-text\"><span class=\"fw-semibold\">Conditions:</span> ${weather[0].description}</p>\n          </div>\n        </div>\n      `;\n\n    weatherDisplay.innerHTML = weatherHtml;\n    errorDisplay.textContent = \"\";\n    resetButton.removeAttribute(\"hidden\");\n    addMapIconLink(name);\n  }\n\n  // Generate a map link\n  function generateMapLink(city) {\n    const formattedCity = city.replace(/\\s+/g, \"+\");\n    const mapServiceUrl = `https://www.google.com/maps/search/?api=1&query=${formattedCity}`;\n    return mapServiceUrl;\n  }\n\n  // Add a map icon link\n  function addMapIconLink(city) {\n    const mapIconContainer = document.getElementById(\"map-icon-container\");\n\n    const mapLink = document.createElement(\"a\");\n    mapLink.href = generateMapLink(city);\n    mapLink.target = \"_blank\";\n    const mapIcon = document.createElement(\"svg\");\n    mapIcon.setAttribute(\"xmlns\", \"http://www.w3.org/2000/svg\");\n    mapIcon.setAttribute(\"width\", \"25\");\n    mapIcon.setAttribute(\"height\", \"25\");\n    mapIcon.setAttribute(\"fill\", \"currentColor\");\n    mapIcon.setAttribute(\"class\", \"bi bi-geo-alt yellow-sun-color\");\n    mapIcon.setAttribute(\"viewBox\", \"0 0 16 16\");\n\n    // Create the path for the map icon\n    const path = document.createElement(\"path\");\n    path.setAttribute(\n      \"d\",\n      \"M12.166 8.94c-.524 1.062-1.234 2.12-1.96 3.07A31.493 31.493 0 0 1 8 14.58a31.481 31.481 0 0 1-2.206-2.57c-.726-.95-1.436-2.008-1.96-3.07C3.304 7.867 3 6.862 3 6a5 5 0 0 1 10 0c0 .862-.305 1.867-.834 2.94zM8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10z\"\n    );\n\n    // Append the path to the map icon, to the map Link, to the map container\n    mapIcon.appendChild(path);\n    mapLink.appendChild(mapIcon);\n    mapIconContainer.appendChild(mapLink);\n  }\n\n  function handleApiError(errorMessage) {\n    showError(errorMessage);\n    weatherDisplay.textContent = \"\";\n  }\n\n  errorPopup.addEventListener(\"click\", hideError);\n\n  document.addEventListener(\"click\", (event) => {\n    if (event.target === errorPopup) {\n      hideError();\n    }\n  });\n\n  // Handling API errors\n  function showError(message) {\n    errorMessage.textContent = message;\n    errorPopup.style.display = \"flex\";\n  }\n\n  function hideError() {\n    errorPopup.style.display = \"none\";\n  }\n\n  // Create information buttons\n  function createInfoButtons() {\n    const infoTypesContainer = document.createElement(\"div\");\n    infoTypesContainer.setAttribute(\"id\", \"info-types-container\");\n    infoTypesContainer.classList.add(\"grid\", \"text-center\");\n\n    const infoTypes = [\n      \"Temperature min\",\n      \"Temperature max\",\n      \"Humidity\",\n      \"Wind Speed\",\n      \"Sunrise\",\n      \"Sunset\",\n      \"Pressure\",\n      \"Longitude\",\n      \"Latitude\",\n      \"Clouds\",\n    ];\n\n    infoTypes.forEach((infoType) => {\n      const infoButton = document.createElement(\"button\");\n      infoButton.classList.add(\n        \"btn\",\n        \"btn-outline-dark\",\n        \"m-2\",\n        \"p-2\",\n        \"g-col-6\",\n        \"g-col-md-4\"\n      );\n      infoButton.textContent = infoType;\n      infoButton.addEventListener(\"click\", () => {\n        addInfoType(infoType, infoButton);\n      });\n      infoTypesContainer.append(infoButton);\n    });\n    weatherMoreInfoDisplay.innerHTML = \"\";\n    weatherMoreInfoDisplay.append(infoTypesContainer);\n  }\n\n  // Add an information type\n  function addInfoType(infoType, infoButton) {\n    if (!selectedInfoTypes.includes(infoType)) {\n      selectedInfoTypes.push(infoType);\n      infoButton.style.display = \"none\";\n      displaySelectedInfo();\n    }\n  }\n\n  const selectedInfoContainer = document.createElement(\"div\");\n  selectedInfoContainer.setAttribute(\"id\", \"selected-info-container\");\n  selectedInfoContainer.classList.add(\n    \"card\",\n    \"bg_blue-dark-color\",\n    \"p-3\",\n    \"primary-color\",\n    \"mt-3\",\n    \"mx-auto\",\n    \"d-flex\",\n    \"align-items-center\"\n  );\n  selectedInfoContainer.style.width = \"18rem\";\n  const card_body = document.createElement(\"div\");\n  card_body.classList.add(\"card-body\");\n  selectedInfoContainer.append(card_body);\n  const selectedInfoList = document.createElement(\"ul\");\n  selectedInfoList.classList.add(\"list-unstyled\");\n  card_body.appendChild(selectedInfoList);\n\n  // Display selected information\n  function displaySelectedInfo() {\n    selectedInfoList.innerHTML = \"\";\n    selectedInfoTypes.forEach((infoType) => {\n      const infoText = getInfoText(infoType);\n      if (infoText) {\n        const listItem = document.createElement(\"li\");\n        listItem.classList.add(\"card-text\", \"my-2\");\n        listItem.textContent = infoText;\n\n        selectedInfoList.appendChild(listItem);\n      }\n    });\n    weatherMoreInfoDisplay.appendChild(selectedInfoContainer);\n  }\n\n  // Get information text based on infoType\n  function getInfoText(infoType) {\n    switch (infoType) {\n      case \"Temperature min\":\n        return `Temperature min: ${weatherData.main.temp_min}\u00B0C`;\n      case \"Temperature max\":\n        return `Temperature max: ${weatherData.main.temp_max}\u00B0C`;\n      case \"Humidity\":\n        return `Humidity: ${weatherData.main.humidity}%`;\n      case \"Wind Speed\":\n        return `Wind Speed: ${weatherData.wind.speed} m/s`;\n      case \"Sunrise\":\n        return `Sunrise: ${new Date(\n          weatherData.sys.sunrise * 1000\n        ).toLocaleTimeString()}`;\n      case \"Sunset\":\n        return `Sunset: ${new Date(\n          weatherData.sys.sunset * 1000\n        ).toLocaleTimeString()}`;\n      case \"Pressure\":\n        return `Pressure: ${weatherData.main.pressure}`;\n      case \"Longitude\":\n        return `Longitude: ${weatherData.coord.lon}`;\n      case \"Latitude\":\n        return `Latitude: ${weatherData.coord.lat}`;\n      case \"Rain\":\n        return `Clouds: ${weatherData.clouds.all} %`;\n      default:\n        return \"\";\n    }\n  }\n});\n"],
  "mappings": "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",
  "names": ["errorMessage"]
}
